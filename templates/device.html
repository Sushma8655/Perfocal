<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<style>
input {
width:70%;
}
#mactb {
  border-collapse: collapse;

  border-spacing: 0;
  width: 100%;
  border:none;
}
th, td {
  text-align: left;
  padding: 8px;
  border: none;
}
#machtb th, td, a{
text-decoration:none;
color:black;
}
tr:nth-child(even){background-color: #f2f2f2}

.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 15px;
  margin: 4px 2px;
  cursor: pointer;
}
.button a{
color:transparent;
}
.button2 {background-color: #008CBA;
 } /* Blue */

.button3 {background-color: #f44336;
} /* Red */



</style>


<script>
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>
<script>
    var csrfToken = getCookie('XSRF-TOKEN');
    console.log(csrfToken);
    window.onload = function(){
        var csrfToken = getCookie('XSRF-TOKEN');
         document.getElementById('csrf').value = csrfToken ;
    }
</script>
<br>
<hr>
<div class="container">
<form method="POST" action="">
<h3>Add Machine Form</h3>
    <hr>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="MachineID">Machine ID:</label>
            <br>
           <input type="text" name="MachineID" id="MachineID" autocomplete="off" required>
        </div>
      </div>
      <!--  col-md-6   -->

      <div class="col-md-6">
        <div class="form-group">
          <label for="AssetID">Asset ID:</label>
            <br>
           <input type="text" name="AssetID" id="AssetID" autocomplete="off" required>
        </div>
      </div>
      <!--  col-md-6   -->
    </div>


    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="MachineName">Machine Name:</label>
            <br>
          <input type="text" name="MachineName" id="MachineName" autocomplete="off" required>
        </div>
      </div>

      <!--  col-md-6   -->

      <div class="col-md-6">

        <div class="form-group">
          <label for="Capacity">Machine Capacity:</label>
            <br>
         <input type="text" name="Capacity" id="Capacity" autocomplete="off" required>
        </div>
      </div>
      <!--  col-md-6   -->
    </div>
    <!--  row   -->

    <button type="submit" class="btn btn-success">Add Machine</button>
  </form>
</div>
<hr>
<div style="overflow-x:auto;" >
<table id="mactb">
    <thead>
    <tr>
        <th>Machine ID</th>
        <th>Asset ID</th>
        <th>Machine Name</th>
        <th>Capacity</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
{% for result in data %}
<tr >
    <td>{{result.MachineID}}</td>
    <td>{{result.AssetID}}</td>
    <td>{{result.MachineName}}</td>
    <td>{{result.Capacity}}</td>
    <td><a href="/edit/{{ result.MachineID }}" role="button"><button class="btn btn-primary">Edit</button></a>
     <a href="/delete/{{result.MachineID}}"  role="button"><button class="btn btn-danger">X</button></a></td>
</tr>
        {% endfor %}
    </tbody>
  </table>
</div>

{% endblock content %}